{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "dnp-user-schema",
  "javaType": "com.tracelink.dnp.user",
  "id": "wv:dnp-user-schema",
  "schemaId": "masterSchema",
  "schemaVersion": 1,
  "objectType": "wv:dnp-user-schema",
  "objectTypeSchemaVersion": 1,
  "objectTypeSchemaSubversion": 1601049928671,
  "javaInterfaces": [
    "com.tracelink.dnp.api.TLObject",
    "com.tracelink.dnp.api.TLPersistence"
  ],
  "definitions" : {
    "dateTimeType": {
      "$id": "#dateTimeType",
      "type": "integer",
      "format": "utc-millisec",
      "description": "date created in Epoch time format"
    },
    "data": {
      "type": "object",
      "properties": {
        "username": {
          "type": "string",
          "luceneStore": true
        },
        "age": {
          "type": "number"
        },
        "address": {
          "type": "object",
          "properties": {
            "country": {
              "type": "string",
              "luceneStore": true
            },
            "state": {
              "type": "string"
            },
            "city": {
              "type": "string"
            }
          }
        },
        "birthday": {
          "type": "object",
          "properties": {
            "year": {
              "type": "number"
            },
            "month": {
              "type": "number"
            },
            "day": {
              "type": "number"
            }
          }
        },
        "high-school": {
          "type": "string"
        },
        "college": {
          "type": "string",
          "snippet": "${payload.relationships.aptBusinessObjectAssignedToPartnerMasterData[0].toId}"
        },
        "phones": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "phoneNumberType": {
                "type": "string",
                "luceneStore": true
              },
              "phoneNumberValue": {
                "type": "string",
                "luceneStore": false
              }
            }
          }
        },
        "hobbies": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    }
  },
  "properties": {
    "id": {
      "type": "string"
    },
    "schemaId": {
      "type": "string"
    },
    "schemaVersion": {
      "type": "integer"
    },
    "dataVersion": {
      "type": "integer",
      "description": "version of the data",
      "example": "1"
    },
    "creationDateTime": {
      "type": "number",
      "format": "utc-millisec",
      "description": "date created in ms"
    },
    "lastUpdatedDateTime" : {
      "$ref" : "#/definitions/dateTimeType"
    },
    "description": {
      "type": "string"
    },
    "data" : {
      "$ref" : "#/definitions/data"
    }
  },
  "indexes": [
    {
      "indexName": "index-username",
      "style": "DNP",
      "category": "NORMAL",
      "dataType": "string",
      "unique": false,
      "asc": true,
      "fields": [
        "username"
      ]
    },
    {
      "indexName": "index-phones",
      "style": "DNP",
      "category": "SET",
      "dataType": "string",
      "unique": false,
      "asc": true,
      "fields": [
        "/data/phones/*/phoneNumberValue"
      ]
    },
    {
      "indexName": "index-hobbies",
      "style": "DNP",
      "category": "SET",
      "dataType": "string",
      "unique": false,
      "asc": true,
      "fields": [
        "/data/hobbies/*"
      ]
    },
    {
      "indexName": "index-schools",
      "style": "DNP",
      "category": "SET",
      "dataType": "string",
      "unique": false,
      "asc": true,
      "fields": [
        "high-school",
        "college"
      ]
    },
    {
      "indexName": "index-compound-schema",
      "style": "DNP",
      "category": "NORMAL",
      "dataType": "string",
      "unique": false,
      "asc": true,
      "fields": [
        "schemaId",
        "schemaVersion"
      ]
    },
    {
      "indexName": "index-lastUpdatedDateTime",
      "category": "NORMAL",
      "dataType": "long",
      "unique": true,
      "asc": true,
      "fields": [
        "/lastUpdatedDateTime"
      ]
    },
    {
      "indexName": "index-wvfts-fields",
      "style": "DNP",
      "category": "WVFTS",
      "dataType": "string",
      "unique": false,
      "asc": true,
      "fields": [
        "schemaId",
        "username"
      ]
    },
    {
      "indexName": "index-fts-hobbies",
      "style": "DNP",
      "category": "FTS",
      "dataType": "string",
      "unique": false,
      "asc": true,
      "fields": [
        "/data/hobbies/*"
      ]
    },
    {
      "indexName": "index-fts-username",
      "style": "DNP",
      "category": "FTS",
      "dataType": "string",
      "unique": false,
      "asc": true,
      "fields": [
        "username"
      ]
    },
    {
      "indexName": "index-fts-age",
      "style": "DNP",
      "category": "FTS",
      "dataType": "long",
      "unique": false,
      "asc": true,
      "fields": [
        "age"
      ]
    },
    {
      "indexName": "index-facet-address",
      "style": "DNP",
      "category": "LUCENE_FACETED",
      "dataType": "string",
      "fields": [
        "/data/address/country",
        "/data/address/state",
        "/data/address/city"
      ]
    },
    {
      "indexName": "index-facet-birthday",
      "style": "DNP",
      "category": "LUCENE_FACETED",
      "dataType": "string",
      "fields": [
        "/data/birthday/year",
        "/data/birthday/month",
        "/data/birthday/day"
      ]
    }
  ]
}